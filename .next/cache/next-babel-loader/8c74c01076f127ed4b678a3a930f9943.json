{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\USER\\\\Desktop\\\\DGlamour\\\\client\\\\component\\\\pedidos\\\\Pedido.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { useMutation } from '@apollo/client';\nimport { ACTUALIZAR_PEDIDO, ELIMINAR_PEDIDO, OBTENER_PEDIDOS_SINGLE } from '../../graphql/pedidos';\nimport Swal from 'sweetalert2';\nexport default function Pedido(_ref) {\n  _s();\n\n  var _this = this;\n\n  var pedido = _ref.pedido;\n  var id = pedido.id,\n      total = pedido.total,\n      _pedido$cliente = pedido.cliente,\n      nombre = _pedido$cliente.nombre,\n      telefono = _pedido$cliente.telefono,\n      email = _pedido$cliente.email,\n      estado = pedido.estado,\n      cliente = pedido.cliente;\n\n  var _useMutation = useMutation(ACTUALIZAR_PEDIDO),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      actualizarPedido = _useMutation2[0];\n\n  var _useMutation3 = useMutation(ELIMINAR_PEDIDO, {\n    update: function update(cache) {\n      var _cache$readQuery = cache.readQuery({\n        query: OBTENER_PEDIDOS_SINGLE\n      }),\n          obtenerPedidosVendedor = _cache$readQuery.obtenerPedidosVendedor;\n\n      cache.writeQuery({\n        query: OBTENER_PEDIDOS_SINGLE,\n        data: {\n          obtenerPedidosVendedor: obtenerPedidosVendedor.filter(function (pedido) {\n            return pedido.id !== id;\n          })\n        }\n      });\n    }\n  }),\n      _useMutation4 = _slicedToArray(_useMutation3, 1),\n      eliminarPedido = _useMutation4[0];\n\n  var _useState = useState(estado),\n      estadoPedido = _useState[0],\n      setEstadoPedido = _useState[1];\n\n  var _useState2 = useState(''),\n      clase = _useState2[0],\n      setClase = _useState2[1];\n\n  useEffect(function () {\n    if (estadoPedido) {\n      setEstadoPedido(estadoPedido);\n    }\n\n    clasePedido();\n  }, [estadoPedido]);\n\n  var clasePedido = function clasePedido() {\n    if (estadoPedido === 'PENDIENTE') {\n      setClase('border-yellow-500');\n    } else if (estadoPedido === 'COMPLETADO') {\n      setClase('border-green-500');\n    } else {\n      setClase('border-red-800');\n    }\n  };\n\n  var cambiarEstadoPedido = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(nuevoEstado) {\n      var _yield$actualizarPedi, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return actualizarPedido({\n                variables: {\n                  id: id,\n                  input: {\n                    estado: nuevoEstado,\n                    cliente: cliente.id\n                  }\n                }\n              });\n\n            case 3:\n              _yield$actualizarPedi = _context.sent;\n              data = _yield$actualizarPedi.data;\n              setEstadoPedido(data.actualizarPedido.estado);\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 8]]);\n    }));\n\n    return function cambiarEstadoPedido(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var confirmarEliminarPedido = function confirmarEliminarPedido() {\n    Swal.fire({\n      title: '¿Deseas eliminar a este pedido?',\n      text: 'Esta acción no se puede deshacer',\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Si, Eliminar',\n      cancelButtonText: 'No, Cancelar'\n    }).then( /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(result) {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!result.value) {\n                  _context2.next = 11;\n                  break;\n                }\n\n                _context2.prev = 1;\n                _context2.next = 4;\n                return eliminarPedido({\n                  variables: {\n                    id: id\n                  }\n                });\n\n              case 4:\n                data = _context2.sent;\n                Swal.fire('Eliminado', data.eliminarPedido, 'success');\n                _context2.next = 11;\n                break;\n\n              case 8:\n                _context2.prev = 8;\n                _context2.t0 = _context2[\"catch\"](1);\n                console.log(_context2.t0);\n\n              case 11:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[1, 8]]);\n      }));\n\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n  };\n\n  return __jsx(\"div\", {\n    className: \" \".concat(clase, \" border-t-4 mt-4 bg-white rounded p-6 md:grid md:grid-cols-2 md:gap-4 shadow-lg\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }, __jsx(\"p\", {\n    className: \"font-bold text-gray-800\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }, \"Cliente: \", nombre, \" \", apellido, ' '), email && __jsx(\"p\", {\n    className: \"flex items-center my-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, __jsx(\"svg\", {\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: \"2\",\n    viewBox: \"0 0 24 24\",\n    className: \"w-4 h-4 mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, __jsx(\"path\", {\n    d: \"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  })), email), telefono && __jsx(\"p\", {\n    className: \"flex items-center my-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 11\n    }\n  }, __jsx(\"svg\", {\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: \"2\",\n    viewBox: \"0 0 24 24\",\n    className: \"w-4 h-4 mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }, __jsx(\"path\", {\n    d: \"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  })), telefono), __jsx(\"h2\", {\n    className: \"text-gray-800 font-bold mt-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }, \"Estado Pedido:\"), __jsx(\"select\", {\n    className: \"mt-2 appearance-none bg-blue-600 border border-blue-600 text-white p-2 text-center rounded leading-tight focus:outline-none focus:bg-blue-600 focus:border-blue-500 uppercase text-xs font-bold \",\n    value: estadoPedido,\n    onChange: function onChange(e) {\n      return cambiarEstadoPedido(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }, __jsx(\"option\", {\n    value: \"COMPLETADO\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  }, \"COMPLETADO\"), __jsx(\"option\", {\n    value: \"PENDIENTE\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, \"PENDIENTE\"), __jsx(\"option\", {\n    value: \"CANCELADO\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 11\n    }\n  }, \"CANCELADO\"))), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }\n  }, __jsx(\"h2\", {\n    className: \"text-gray-800 font-bold mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 9\n    }\n  }, \"Resumen del Pedido\"), pedido.pedido.map(function (articulo) {\n    return __jsx(\"div\", {\n      key: articulo.id,\n      className: \"mt-4\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 11\n      }\n    }, __jsx(\"p\", {\n      className: \"text-sm text-gray-600\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 13\n      }\n    }, \"Producto: \", articulo.nombre, ' '), __jsx(\"p\", {\n      className: \"text-sm text-gray-600\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }\n    }, \"Cantidad: \", articulo.cantidad, ' '));\n  }), __jsx(\"p\", {\n    className: \"text-gray-800 mt-3 font-bold \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }\n  }, \"Total a pagar:\", __jsx(\"span\", {\n    className: \"font-light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 11\n    }\n  }, \" $ \", total)), __jsx(\"button\", {\n    className: \"uppercase text-xs font-bold  flex items-center mt-4 bg-red-800 px-5 py-2 inline-block text-white rounded leading-tight\",\n    onClick: function onClick() {\n      return confirmarEliminarPedido();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }\n  }, \"Eliminar Pedido\", __jsx(\"svg\", {\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: \"2\",\n    viewBox: \"0 0 24 24\",\n    className: \"w-4 h-4 ml-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 11\n    }\n  }, __jsx(\"path\", {\n    d: \"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  })))));\n}\n\n_s(Pedido, \"L1yYRhLtwkpn76UcAfDGLMPSSuo=\", false, function () {\n  return [useMutation, useMutation];\n});\n\n_c = Pedido;\n\nvar _c;\n\n$RefreshReg$(_c, \"Pedido\");","map":{"version":3,"sources":["C:/Users/USER/Desktop/DGlamour/client/component/pedidos/Pedido.js"],"names":["React","useState","useEffect","useMutation","ACTUALIZAR_PEDIDO","ELIMINAR_PEDIDO","OBTENER_PEDIDOS_SINGLE","Swal","Pedido","pedido","id","total","cliente","nombre","telefono","email","estado","actualizarPedido","update","cache","readQuery","query","obtenerPedidosVendedor","writeQuery","data","filter","eliminarPedido","estadoPedido","setEstadoPedido","clase","setClase","clasePedido","cambiarEstadoPedido","nuevoEstado","variables","input","console","log","confirmarEliminarPedido","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","then","result","value","apellido","e","target","map","articulo","cantidad"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useMutation } from '@apollo/client';\r\nimport {\r\n  ACTUALIZAR_PEDIDO,\r\n  ELIMINAR_PEDIDO,\r\n  OBTENER_PEDIDOS_SINGLE,\r\n} from '../../graphql/pedidos';\r\nimport Swal from 'sweetalert2';\r\n\r\nexport default function Pedido({ pedido }) {\r\n  const {\r\n    id,\r\n    total,\r\n    cliente: { nombre, telefono, email },\r\n    estado,\r\n    cliente,\r\n  } = pedido;\r\n  const [actualizarPedido] = useMutation(ACTUALIZAR_PEDIDO);\r\n  const [eliminarPedido] = useMutation(ELIMINAR_PEDIDO, {\r\n    update(cache) {\r\n      const { obtenerPedidosVendedor } = cache.readQuery({\r\n        query: OBTENER_PEDIDOS_SINGLE,\r\n      });\r\n\r\n      cache.writeQuery({\r\n        query: OBTENER_PEDIDOS_SINGLE,\r\n        data: {\r\n          obtenerPedidosVendedor: obtenerPedidosVendedor.filter(\r\n            (pedido) => pedido.id !== id\r\n          ),\r\n        },\r\n      });\r\n    },\r\n  });\r\n\r\n  const [estadoPedido, setEstadoPedido] = useState(estado);\r\n  const [clase, setClase] = useState('');\r\n  useEffect(() => {\r\n    if (estadoPedido) {\r\n      setEstadoPedido(estadoPedido);\r\n    }\r\n    clasePedido();\r\n  }, [estadoPedido]);\r\n\r\n  const clasePedido = () => {\r\n    if (estadoPedido === 'PENDIENTE') {\r\n      setClase('border-yellow-500');\r\n    } else if (estadoPedido === 'COMPLETADO') {\r\n      setClase('border-green-500');\r\n    } else {\r\n      setClase('border-red-800');\r\n    }\r\n  };\r\n\r\n  const cambiarEstadoPedido = async (nuevoEstado) => {\r\n    try {\r\n      const { data } = await actualizarPedido({\r\n        variables: {\r\n          id,\r\n          input: {\r\n            estado: nuevoEstado,\r\n            cliente: cliente.id,\r\n          },\r\n        },\r\n      });\r\n      setEstadoPedido(data.actualizarPedido.estado);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  const confirmarEliminarPedido = () => {\r\n    Swal.fire({\r\n      title: '¿Deseas eliminar a este pedido?',\r\n      text: 'Esta acción no se puede deshacer',\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: 'Si, Eliminar',\r\n      cancelButtonText: 'No, Cancelar',\r\n    }).then(async (result) => {\r\n      if (result.value) {\r\n        try {\r\n          const data = await eliminarPedido({\r\n            variables: {\r\n              id,\r\n            },\r\n          });\r\n\r\n          Swal.fire('Eliminado', data.eliminarPedido, 'success');\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={` ${clase} border-t-4 mt-4 bg-white rounded p-6 md:grid md:grid-cols-2 md:gap-4 shadow-lg`}\r\n    >\r\n      <div>\r\n        <p className=\"font-bold text-gray-800\">\r\n          Cliente: {nombre} {apellido}{' '}\r\n        </p>\r\n\r\n        {email && (\r\n          <p className=\"flex items-center my-2\">\r\n            <svg\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth=\"2\"\r\n              viewBox=\"0 0 24 24\"\r\n              className=\"w-4 h-4 mr-2\"\r\n            >\r\n              <path d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\"></path>\r\n            </svg>\r\n            {email}\r\n          </p>\r\n        )}\r\n\r\n        {telefono && (\r\n          <p className=\"flex items-center my-2\">\r\n            <svg\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth=\"2\"\r\n              viewBox=\"0 0 24 24\"\r\n              className=\"w-4 h-4 mr-2\"\r\n            >\r\n              <path d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\"></path>\r\n            </svg>\r\n            {telefono}\r\n          </p>\r\n        )}\r\n\r\n        <h2 className=\"text-gray-800 font-bold mt-10\">Estado Pedido:</h2>\r\n\r\n        <select\r\n          className=\"mt-2 appearance-none bg-blue-600 border border-blue-600 text-white p-2 text-center rounded leading-tight focus:outline-none focus:bg-blue-600 focus:border-blue-500 uppercase text-xs font-bold \"\r\n          value={estadoPedido}\r\n          onChange={(e) => cambiarEstadoPedido(e.target.value)}\r\n        >\r\n          <option value=\"COMPLETADO\">COMPLETADO</option>\r\n          <option value=\"PENDIENTE\">PENDIENTE</option>\r\n          <option value=\"CANCELADO\">CANCELADO</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div>\r\n        <h2 className=\"text-gray-800 font-bold mt-2\">Resumen del Pedido</h2>\r\n        {pedido.pedido.map((articulo) => (\r\n          <div key={articulo.id} className=\"mt-4\">\r\n            <p className=\"text-sm text-gray-600\">\r\n              Producto: {articulo.nombre}{' '}\r\n            </p>\r\n            <p className=\"text-sm text-gray-600\">\r\n              Cantidad: {articulo.cantidad}{' '}\r\n            </p>\r\n          </div>\r\n        ))}\r\n\r\n        <p className=\"text-gray-800 mt-3 font-bold \">\r\n          Total a pagar:\r\n          <span className=\"font-light\"> $ {total}</span>\r\n        </p>\r\n\r\n        <button\r\n          className=\"uppercase text-xs font-bold  flex items-center mt-4 bg-red-800 px-5 py-2 inline-block text-white rounded leading-tight\"\r\n          onClick={() => confirmarEliminarPedido()}\r\n        >\r\n          Eliminar Pedido\r\n          <svg\r\n            fill=\"none\"\r\n            stroke=\"currentColor\"\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            strokeWidth=\"2\"\r\n            viewBox=\"0 0 24 24\"\r\n            className=\"w-4 h-4 ml-2\"\r\n          >\r\n            <path d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}